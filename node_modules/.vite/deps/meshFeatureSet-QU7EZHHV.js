import {
  i as i3,
  n as n2
} from "./chunk-MSPLHQ5Q.js";
import {
  q
} from "./chunk-27HNBXL6.js";
import "./chunk-KOVX3HFA.js";
import "./chunk-PGNIZQW2.js";
import "./chunk-DPEZN2CZ.js";
import "./chunk-6T6LJGGM.js";
import {
  i as i2,
  n
} from "./chunk-N7FHQ2V4.js";
import "./chunk-VEV4W47R.js";
import "./chunk-5YPA3JNT.js";
import "./chunk-IZLTNW77.js";
import "./chunk-7LWCMMSB.js";
import "./chunk-V5GIC4SS.js";
import "./chunk-HNIWOJER.js";
import "./chunk-CPLLBL2J.js";
import "./chunk-HPADPQJ7.js";
import {
  s
} from "./chunk-PTLGJ4Y6.js";
import "./chunk-53X5LI6T.js";
import "./chunk-IKYEKMWB.js";
import "./chunk-M72BPMIY.js";
import "./chunk-T7BLJR6Y.js";
import "./chunk-CNAPAPCO.js";
import "./chunk-NN5O537H.js";
import "./chunk-ZTP32NOX.js";
import "./chunk-WBRO5HGL.js";
import "./chunk-3JKWT76Y.js";
import "./chunk-LOLNWH3R.js";
import "./chunk-X5BGX2UZ.js";
import "./chunk-IQIGYB5K.js";
import "./chunk-T4WPBSSK.js";
import "./chunk-7Q65H3HK.js";
import "./chunk-OLJI3PYM.js";
import "./chunk-2RL34CVC.js";
import "./chunk-BNQMKYX6.js";
import "./chunk-B6C2GOG6.js";
import "./chunk-K3VYMAVM.js";
import {
  g
} from "./chunk-YELEYCYV.js";
import "./chunk-3M6ALZOH.js";
import "./chunk-QPV4BKBC.js";
import "./chunk-RSDQMJRT.js";
import "./chunk-3CFYBBSV.js";
import "./chunk-JID2PGFV.js";
import "./chunk-N77BULFI.js";
import "./chunk-NEIJCC5O.js";
import "./chunk-UMUW6RKM.js";
import "./chunk-H6ZVHKNF.js";
import "./chunk-YAXW2DL6.js";
import {
  d
} from "./chunk-2JMCZ3BT.js";
import "./chunk-7D32HQWD.js";
import "./chunk-Z7YG4UNG.js";
import "./chunk-2CS746FZ.js";
import "./chunk-6YSDDH6K.js";
import "./chunk-MCOL2MI5.js";
import "./chunk-AVMLDZZZ.js";
import "./chunk-IQQJPZC6.js";
import "./chunk-B5AZBN2H.js";
import "./chunk-C6OAHV3Z.js";
import "./chunk-FSYN2HHU.js";
import "./chunk-UYERGX5D.js";
import "./chunk-BTVDNPEM.js";
import "./chunk-3U5B3VOX.js";
import "./chunk-ZAUL2HRL.js";
import "./chunk-FOPBVVXE.js";
import "./chunk-MHZNPCC3.js";
import "./chunk-5ZJMLCBK.js";
import "./chunk-QUZZIDFR.js";
import "./chunk-XNUSHDFN.js";
import "./chunk-D4S6H6HS.js";
import "./chunk-4AKMPOG7.js";
import "./chunk-IDSV3U3M.js";
import "./chunk-2CJBZZN7.js";
import "./chunk-N7OU5PYY.js";
import "./chunk-RKF6WUZT.js";
import "./chunk-3LTBYQQS.js";
import "./chunk-YXZLRZNZ.js";
import "./chunk-YVNZKO6I.js";
import "./chunk-27M3EN5Y.js";
import "./chunk-DQBIAKCW.js";
import "./chunk-MOMLPET6.js";
import "./chunk-P5FXO7WR.js";
import "./chunk-UCCG5WDW.js";
import "./chunk-SDIBXPSJ.js";
import "./chunk-WAXP6XIO.js";
import "./chunk-IVKSCXGN.js";
import "./chunk-YYLIW24Q.js";
import "./chunk-B7BH33JH.js";
import "./chunk-DDNC6A36.js";
import "./chunk-ZJQPHR3K.js";
import {
  z
} from "./chunk-T6TMEQJ7.js";
import "./chunk-5DBBCQVU.js";
import "./chunk-MNW46TV4.js";
import {
  f
} from "./chunk-JSWMPOBX.js";
import "./chunk-SSVCVBFL.js";
import "./chunk-6JCZVSRM.js";
import "./chunk-LLGOMKTE.js";
import "./chunk-5KQMTKIZ.js";
import "./chunk-PYBAZ6YE.js";
import "./chunk-YC5GI5YQ.js";
import "./chunk-RJI4N3LT.js";
import "./chunk-QSG5WGQI.js";
import "./chunk-X26VPODZ.js";
import "./chunk-XNYPRDKK.js";
import "./chunk-CM3TIXEV.js";
import "./chunk-Y4BWIIWH.js";
import "./chunk-3TN73U7K.js";
import "./chunk-SL5A7INV.js";
import "./chunk-VHPBXBDE.js";
import "./chunk-6ACTD4UJ.js";
import "./chunk-5REYU5G2.js";
import "./chunk-YO7WHZZ7.js";
import "./chunk-OUZJZB6I.js";
import {
  u
} from "./chunk-JNYZ3I5R.js";
import "./chunk-Q6OL33PY.js";
import {
  i3 as i
} from "./chunk-TJPLHZCD.js";
import "./chunk-KLFJ5V5G.js";
import "./chunk-GNMFMITH.js";

// node_modules/@arcgis/core/rest/support/meshFeatureSet.js
var p = () => i.getLogger("esri.rest.support.meshFeatureSet");
function l(t, r, s2) {
  const o = s2.features;
  s2.features = [], delete s2.geometryType;
  const a = g.fromJSON(s2);
  if (a.geometryType = "mesh", !s2.assetMaps) return a;
  const u2 = g2(r, s2.assetMaps), i4 = t.sourceSpatialReference ?? f.WGS84, c = s2.globalIdFieldName, { outFields: m } = t, p2 = null != m && m.length > 0 ? y(m.includes("*") ? null : new Set(m)) : () => ({});
  for (const n3 of o) {
    const t2 = E(n3, c, i4, r, u2);
    a.features.push(new d({ geometry: t2, attributes: p2(n3) }));
  }
  return a;
}
function y(e) {
  return ({ attributes: t }) => {
    if (!t) return {};
    if (!e) return t;
    for (const r in t) e.has(r) || delete t[r];
    return t;
  };
}
function E(e, t, r, n3, a) {
  const u2 = e.attributes[t], i4 = a.get(u2);
  if (null == i4 || !e.geometry) return null;
  const f2 = n2(e.attributes, r, n3.transformFieldRoles), p2 = z.fromJSON(e.geometry);
  p2.spatialReference = r;
  const l2 = i3(e.attributes, n3.transformFieldRoles), y2 = r.isGeographic ? "local" : "georeferenced", E2 = d2(i4);
  return E2 ? q.createWithExternalSource(f2, E2, { extent: p2, transform: l2, vertexSpace: y2, unitConversionDisabled: true }) : q.createIncomplete(f2, { extent: p2, transform: l2, vertexSpace: y2 });
}
var h;
function g2(e, t) {
  const s2 = /* @__PURE__ */ new Map();
  for (const o of t) {
    const t2 = o.parentGlobalId;
    if (null == t2) continue;
    const n3 = o.assetName, a = o.assetType, u2 = o.assetHash, f2 = o.assetURL, c = o.conversionStatus, m = o.seqNo, l2 = s(a, e.supportedFormats);
    if (!l2) {
      p().error("mesh-feature-set:unknown-format", `Service returned an asset of type ${a}, but it does not list it as a supported type`);
      continue;
    }
    const y2 = u(s2, t2, (() => ({ files: /* @__PURE__ */ new Map() })));
    u(y2.files, n3, (() => ({ name: n3, type: a, mimeType: l2, status: S(c), parts: [] }))).parts[m] = { hash: u2, url: f2 };
  }
  return s2;
}
function d2(e) {
  const t = Array.from(e.files.values()), r = new Array();
  for (const s2 of t) {
    if (s2.status !== h.COMPLETED) return null;
    const e2 = new Array();
    for (const t2 of s2.parts) {
      if (!t2) return null;
      e2.push(new n(t2.url, t2.hash));
    }
    r.push(new i2(s2.name, s2.mimeType, e2));
  }
  return { type: "service", assets: r };
}
function S(e) {
  switch (e) {
    case "COMPLETED":
    case "SUBMITTED":
      return h.COMPLETED;
    case "INPROGRESS":
      return h.PENDING;
    default:
      return h.FAILED;
  }
}
!(function(e) {
  e[e.FAILED = 0] = "FAILED", e[e.PENDING = 1] = "PENDING", e[e.COMPLETED = 2] = "COMPLETED";
})(h || (h = {}));
export {
  g2 as assetMapFromAssetMapsJSON,
  E as extractMesh,
  l as meshFeatureSetFromJSON
};
//# sourceMappingURL=meshFeatureSet-QU7EZHHV.js.map
